---
layout:     post
title:      "移动端适配总结"
subtitle:   “谈谈几种常见的移动端适配方案”
date:       2017-11-22
author:     “Wisenl”
header-img: "img/2017-11-20.png"
tags:
    - 技术
    - 布局
---









Viewport  移动网页可视区域，这个区域一般大于或等于屏幕宽度。可以通过平移和缩放来查看网页各个部分



PPK 对viewport 的理论：

**Layout viewport** :  document.documentElement.clientWidth  或者 document.documentElement.getBoundingClientRect().width

**Visual viewport**: window.innerWidth     或者 window.screen.width

**Idea viewport**: iphone6中为375

------------------------

媒体查询 @media

语法

```css
@media mediatype and|not|only (media feature) {
    CSS-Code;
}
```

或者

使用stylesheets

```html
<link rel="stylesheet" media="mediatype and|not|only (media feature)" href="mystylesheet.css">
```



### 移动端适配的几种解决方案



1. 直接对html使用：font-size: 625%  。这样的话就能使用rem单位进行开发，1rem=100px。为什么不用1rem=1px 或 1rem = 10px呢？因为Chrome浏览器上有最小字体12px的限制，放以前还能使用 `-webkit-text-size-adjust: none` 来取消限制，现在已经被废弃了。如果遇到浏览器默认html 的font-size 大小不是 16px，则需要使用媒体查询来列出各个需适配的屏幕，手动设置html的font-size 为px单位

```css
@media only screen and (max-width: 750px), only screen and (max-device-width:750px) {
   html {
   	font-size:200px;
   }
}
@media only screen and (max-width: 640px), only screen and (max-device-width:640px) {
   html {
   	font-size:170.6px;
   }
}
@media only screen and (max-width: 414px), only screen and (max-device-width:414px) {
   html {
   	font-size:110.4px;
   }
}
@media only screen and (max-width: 375px), only screen and (max-device-width:375px) {
   html {
   	font-size:100px;
   }
}
@media only screen and (max-width: 320px), only screen and (max-device-width:320px) {
   html {
   	font-size:85.3px;
   }
}
```
换算的方式是：375屏宽的iphone6 下html 字体设置为10px（也就是1rem = 10px），那么整屏宽度为37.5rem。而对于414屏宽应该使用的字体，换算一下就是 414 / 37.5 = 11.04px。其它屏宽设置换算方式同理，用屏宽除以37.5。另外，如果使用的设计稿是以 750px 为屏宽标准的话，需要将设置的html字体缩小50%。

这样的话，就可以直接使用设计稿上的标注尺寸除以100。比如 标注 元素宽度为80px，则css 设置 width: 0.8rem。

不过这种方案的问题在于，对于不同分辨率的屏幕其适配契合度是分段的而不是平滑的，那么势必会造成某些情况下视觉元素过窄或者过宽。改进的方式就是尽量多设置媒体查询分段，比如每10px设置一个分段，而且要在横向布局时尽量用 flex ，少用固定值。



2. 更进一步：

   使用媒体查询的目的简单又明确，那就是根据不同屏幕宽度设定不同的 html  上 font-size。既然如此，我们为什么不用 JS 来达到目的呢！上代码：

   ```html
       <script type="text/javascript">
         function refreshRem() {
             var currentWidth = document.documentElement.clientWidth;
             document.documentElement.style.fontSize = currentWidth/3.75 + 'px';
         }
         refreshRem();
         window.addEventListener("resize", refreshRem);
       </script>
   ```

   无缝适配各种宽度，多么清晰明了！

1. ​

2. 使用flexible 方案

   ​